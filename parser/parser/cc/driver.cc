#include <ruby_parser/driver.hh>
#include <ruby_parser/lexer.hh>

// Autogenerated code
#include "parser/parser/typedruby_bison.h"

namespace ruby_parser {

driver::driver(ruby_version version, std::string_view source, const struct builder &builder)
    : build(builder), lex(diagnostics, version, source), pending_error(false), def_level(0), ast(nullptr) {}

ForeignPtr driver::parse(SelfPtr self, bool trace) {
    bison::typedruby27::parser p(*this, self);
    p.set_debug_level(trace ? 1 : 0);
    p.parse();
    return ast;
}

} // namespace ruby_parser
