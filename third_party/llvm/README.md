Very inspired by https://github.com/tensorflow/tensorflow/tree/master/third_party/llvm
